<div *ngIf="visible" class="fixed inset-0 bg-black bg-opacity-40 flex items-center justify-center z-50">
  <div class="bg-white rounded-lg shadow-lg p-6 w-full max-w-lg">
    <h2 class="text-lg font-bold mb-4">
      {{ modo === 'add' ? 'Agregar Administrador' : (modo === 'edit' ? 'Editar Administrador' : 'Eliminar Administrador') }}
    </h2>
    <ng-container [ngSwitch]="modo">
      <!-- FORMULARIO AGREGAR -->
      <form *ngSwitchCase="'add'" (ngSubmit)="onSave()" autocomplete="off">
        <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
          <div>
            <label class="block text-gray-700 font-medium mb-1">Nombre *</label>
            <input class="border rounded px-2 py-1 w-full" [(ngModel)]="admin.nombre" name="nombre" required />
          </div>
          <div>
            <label class="block text-gray-700 font-medium mb-1">Apellido *</label>
            <input class="border rounded px-2 py-1 w-full" [(ngModel)]="admin.apellido" name="apellido" required />
          </div>
          <div>
            <label class="block text-gray-700 font-medium mb-1">Nombre de usuario *</label>
            <input class="border rounded px-2 py-1 w-full" [(ngModel)]="admin.nombreUsuario" name="nombreUsuario" required />
          </div>
          <!-- <div>
            <label class="block text-gray-700 font-medium mb-1">Contraseña *</label>
            <input type="password" class="border rounded px-2 py-1 w-full" [(ngModel)]="admin.contrasena" name="contrasena" required />
          </div>
          <div>
            <label class="block text-gray-700 font-medium mb-1">Reingrese su contraseña *</label>
            <input type="password" class="border rounded px-2 py-1 w-full" [(ngModel)]="admin.reingreseContrasena" name="reingreseContrasena" required />
          </div> -->

          <div>
            <label class="block text-gray-700 font-medium mb-1">Contraseña</label>
            <input
              type="password"
              class="border rounded px-2 py-1 w-full"
              [(ngModel)]="admin.contrasena"
              name="contrasena"
              placeholder="Dejar vacío para no cambiar"
            />
          </div>
          <div>
            <label class="block text-gray-700 font-medium mb-1">Reingrese su contraseña</label>
            <input
              type="password"
              class="border rounded px-2 py-1 w-full"
              [(ngModel)]="admin.reingreseContrasena"
              name="reingreseContrasena"
              placeholder="Dejar vacío para no cambiar"
            />
          </div>
          <div>
            <label class="block text-gray-700 font-medium mb-1">Dirección de E-mail *</label>
            <input type="email" class="border rounded px-2 py-1 w-full" [(ngModel)]="admin.email" name="email" required />
          </div>
          <div>
            <label class="block text-gray-700 font-medium mb-1">Número de teléfono *</label>
            <input class="border rounded px-2 py-1 w-full" [(ngModel)]="admin.telefono" name="telefono" required />
          </div>
          <div>
            <label class="block text-gray-700 font-medium mb-1">Número de teléfono móvil</label>
            <input class="border rounded px-2 py-1 w-full" [(ngModel)]="admin.telefonoMovil" name="telefonoMovil" />
          </div>
          <div>
            <label class="block text-gray-700 font-medium mb-1">Domicilio</label>
            <input class="border rounded px-2 py-1 w-full" [(ngModel)]="admin.domicilio" name="domicilio" />
          </div>
          <div>
            <label class="block text-gray-700 font-medium mb-1">Ciudad</label>
            <input class="border rounded px-2 py-1 w-full" [(ngModel)]="admin.ciudad" name="ciudad" />
          </div>
          <div>
            <label class="block text-gray-700 font-medium mb-1">Estado</label>
            <input class="border rounded px-2 py-1 w-full" [(ngModel)]="admin.estado" name="estado" />
          </div>
          <div>
            <label class="block text-gray-700 font-medium mb-1">Código postal</label>
            <input class="border rounded px-2 py-1 w-full" [(ngModel)]="admin.codigoPostal" name="codigoPostal" />
          </div>
          <div>
            <label class="block text-gray-700 font-medium mb-1">Calendario *</label>
            <select class="border rounded px-2 py-1 w-full" [(ngModel)]="admin.calendario" name="calendario" required>
              <option value="Predeterminado">Predeterminado</option>
              <option value="Personalizado">Personalizado</option>
            </select>
          </div>
          <div>
            <label class="block text-gray-700 font-medium mb-1">Idioma *</label>
            <select class="border rounded px-2 py-1 w-full" [(ngModel)]="admin.idioma" name="idioma" required>
              <option value="Spanish">Spanish</option>
              <option value="English">English</option>
            </select>
          </div>
          <div>
            <label class="block text-gray-700 font-medium mb-1">Zona horaria</label>
            <input class="border rounded px-2 py-1 w-full" [(ngModel)]="admin.zonaHoraria" name="zonaHoraria" />
          </div>
          <div class="md:col-span-2">
            <label class="block text-gray-700 font-medium mb-1">Notas</label>
            <textarea class="border rounded px-2 py-1 w-full" [(ngModel)]="admin.notas" name="notas" rows="2"></textarea>
          </div>
          <div class="md:col-span-2 flex items-center gap-2">
            <input type="checkbox" [(ngModel)]="admin.recibirNotificaciones" name="recibirNotificaciones" id="recibirNotificaciones" />
            <label for="recibirNotificaciones" class="text-gray-700 font-medium">Recibir notificaciones</label>
          </div>
        </div>
        <div class="flex justify-end gap-2 mt-6">
          <button type="button" class="bg-gray-300 px-4 py-1 rounded" (click)="onClose()">Cancelar</button>
          <button type="submit" class="bg-green-600 text-white px-4 py-1 rounded">Agregar</button>
        </div>
      </form>
      <!-- FORMULARIO EDITAR -->
      <form *ngSwitchCase="'edit'" (ngSubmit)="onSave()" autocomplete="off">
        <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
          <div>
            <label class="block text-gray-700 font-medium mb-1">Nombre *</label>
            <input class="border rounded px-2 py-1 w-full" [(ngModel)]="admin.nombre" name="nombre" required />
          </div>
          <div>
            <label class="block text-gray-700 font-medium mb-1">Apellido *</label>
            <input class="border rounded px-2 py-1 w-full" [(ngModel)]="admin.apellido" name="apellido" required />
          </div>
          <div>
            <label class="block text-gray-700 font-medium mb-1">Nombre de usuario *</label>
            <input class="border rounded px-2 py-1 w-full" [(ngModel)]="admin.nombreUsuario" name="nombreUsuario" required />
          </div>
          <div>
            <label class="block text-gray-700 font-medium mb-1">Contraseña</label>
            <input type="password" class="border rounded px-2 py-1 w-full" [(ngModel)]="admin.contrasena" name="contrasena" />
          </div>
          <div>
            <label class="block text-gray-700 font-medium mb-1">Reingrese su contraseña</label>
            <input type="password" class="border rounded px-2 py-1 w-full" [(ngModel)]="admin.reingreseContrasena" name="reingreseContrasena" />
          </div>
          <div>
            <label class="block text-gray-700 font-medium mb-1">Dirección de E-mail *</label>
            <input type="email" class="border rounded px-2 py-1 w-full" [(ngModel)]="admin.email" name="email" required />
          </div>
          <div>
            <label class="block text-gray-700 font-medium mb-1">Número de teléfono *</label>
            <input class="border rounded px-2 py-1 w-full" [(ngModel)]="admin.telefono" name="telefono" required />
          </div>
          <div>
            <label class="block text-gray-700 font-medium mb-1">Número de teléfono móvil</label>
            <input class="border rounded px-2 py-1 w-full" [(ngModel)]="admin.telefonoMovil" name="telefonoMovil" />
          </div>
          <div>
            <label class="block text-gray-700 font-medium mb-1">Domicilio</label>
            <input class="border rounded px-2 py-1 w-full" [(ngModel)]="admin.domicilio" name="domicilio" />
          </div>
          <div>
            <label class="block text-gray-700 font-medium mb-1">Ciudad</label>
            <input class="border rounded px-2 py-1 w-full" [(ngModel)]="admin.ciudad" name="ciudad" />
          </div>
          <div>
            <label class="block text-gray-700 font-medium mb-1">Estado</label>
            <input class="border rounded px-2 py-1 w-full" [(ngModel)]="admin.estado" name="estado" />
          </div>
          <div>
            <label class="block text-gray-700 font-medium mb-1">Código postal</label>
            <input class="border rounded px-2 py-1 w-full" [(ngModel)]="admin.codigoPostal" name="codigoPostal" />
          </div>
          <div>
            <label class="block text-gray-700 font-medium mb-1">Calendario *</label>
            <select class="border rounded px-2 py-1 w-full" [(ngModel)]="admin.calendario" name="calendario" required>
              <option value="Predeterminado">Predeterminado</option>
              <option value="Personalizado">Personalizado</option>
            </select>
          </div>
          <div>
            <label class="block text-gray-700 font-medium mb-1">Idioma *</label>
            <select class="border rounded px-2 py-1 w-full" [(ngModel)]="admin.idioma" name="idioma" required>
              <option value="Spanish">Spanish</option>
              <option value="English">English</option>
            </select>
          </div>
          <div>
            <label class="block text-gray-700 font-medium mb-1">Zona horaria</label>
            <input class="border rounded px-2 py-1 w-full" [(ngModel)]="admin.zonaHoraria" name="zonaHoraria" />
          </div>
          <div class="md:col-span-2">
            <label class="block text-gray-700 font-medium mb-1">Notas</label>
            <textarea class="border rounded px-2 py-1 w-full" [(ngModel)]="admin.notas" name="notas" rows="2"></textarea>
          </div>
          <div class="md:col-span-2 flex items-center gap-2">
            <input type="checkbox" [(ngModel)]="admin.recibirNotificaciones" name="recibirNotificaciones" id="recibirNotificacionesEdit" />
            <label for="recibirNotificacionesEdit" class="text-gray-700 font-medium">Recibir notificaciones</label>
          </div>
        </div>
        <div class="flex justify-end gap-2 mt-6">
          <button type="button" class="bg-gray-300 px-4 py-1 rounded" (click)="onClose()">Cancelar</button>
          <button type="submit" class="bg-blue-600 text-white px-4 py-1 rounded">Guardar</button>
        </div>
      </form>
      <!-- CONFIRMACIÓN ELIMINAR -->
      <div *ngSwitchCase="'delete'">
        <p class="mb-6">¿Seguro que deseas eliminar al administrador <b>{{admin.nombre}} {{admin.apellido}}</b>?</p>
        <div class="flex justify-end gap-2">
          <button class="bg-gray-300 px-4 py-1 rounded" (click)="onClose()">Cancelar</button>
          <button class="bg-red-600 text-white px-4 py-1 rounded" (click)="onDelete()">Eliminar</button>
        </div>
      </div>
    </ng-container>
  </div>
</div>
