<div *ngIf="visible" class="fixed inset-0 bg-black bg-opacity-40 flex items-center justify-center z-50">
  <div class="bg-white rounded-lg shadow-lg p-6 w-full max-w-lg">
    <h2 class="text-lg font-bold mb-4">
      {{ modo === 'add' ? 'Agregar Servicio' : (modo === 'edit' ? 'Editar Servicio' : 'Eliminar Servicio') }}
    </h2>
    <ng-container [ngSwitch]="modo">
      <form *ngSwitchCase="'add'" (ngSubmit)="onSave()">
        <div class="mb-4">
          <label class="block text-gray-700 font-medium mb-1">Nombre</label>
          <input class="border rounded px-2 py-1 w-full" [(ngModel)]="servicio.nombre" name="nombre" required />
        </div>
        <div class="mb-4">
          <label class="block text-gray-700 font-medium mb-1">Descripción</label>
          <textarea class="border rounded px-2 py-1 w-full" [(ngModel)]="servicio.descripcion" name="descripcion" rows="2"></textarea>
        </div>
        <div class="mb-4">
          <label class="block text-gray-700 font-medium mb-1">Categoría (opcional)</label>
          <select class="border rounded px-2 py-1 w-full" [(ngModel)]="servicio.categoriaId" name="categoriaId">
            <option [ngValue]="null">Sin categoría</option>
            <option *ngFor="let cat of categorias" [ngValue]="cat.id">{{cat.nombre}}</option>
          </select>
        </div>
        <div class="mb-4">
          <label class="block text-gray-700 font-medium mb-1">Duración (minutos)</label>
          <input type="number" class="border rounded px-2 py-1 w-full" [(ngModel)]="servicio.duracionMinutos" name="duracionMinutos" min="1" required />
        </div>
        <div class="mb-4 flex gap-2">
          <div class="flex-1">
            <label class="block text-gray-700 font-medium mb-1">Precio</label>
            <input type="number" class="border rounded px-2 py-1 w-full" [(ngModel)]="servicio.precio" name="precio" min="0" required />
          </div>
          <div>
            <label class="block text-gray-700 font-medium mb-1">Moneda</label>
            <input class="border rounded px-2 py-1 w-20" [(ngModel)]="servicio.moneda" name="moneda" maxlength="3" required />
          </div>
        </div>
        <div class="mb-4">
          <label class="block text-gray-700 font-medium mb-1">Tipo</label>
          <input class="border rounded px-2 py-1 w-full" [(ngModel)]="servicio.tiposDisponibles" name="tiposDisponibles" />
        </div>
        <div class="mb-4">
          <label class="block text-gray-700 font-medium mb-1">Número de asistentes</label>
          <input type="number" class="border rounded px-2 py-1 w-full" [(ngModel)]="servicio.numeroAsistentes" name="numeroAsistentes" min="1" />
        </div>
        <div class="mb-4">
          <label class="block text-gray-700 font-medium mb-1">Ubicación</label>
          <input class="border rounded px-2 py-1 w-full" [(ngModel)]="servicio.ubicacion" name="ubicacion" />
        </div>
        <div class="mb-4">
          <label class="block text-gray-700 font-medium mb-1">Color</label>
          <input type="color" class="border rounded px-2 py-1 w-16 h-10" [(ngModel)]="servicio.color" name="color" />
        </div>
        <div class="mb-4 flex items-center gap-2">
          <input type="checkbox" [(ngModel)]="servicio.ocultarPublico" name="ocultarPublico" id="ocultarPublico" />
          <label for="ocultarPublico" class="text-gray-700 font-medium">Ocultar del público</label>
        </div>
        <div class="flex justify-end gap-2">
          <button type="button" class="bg-gray-300 px-4 py-1 rounded" (click)="onClose()">Cancelar</button>
          <button type="submit" class="bg-green-600 text-white px-4 py-1 rounded">Agregar</button>
        </div>
      </form>
      <form *ngSwitchCase="'edit'" (ngSubmit)="onSave()">
        <!-- Mismos campos que en 'add', pero el botón dice 'Guardar' -->
        <div class="mb-4">
          <label class="block text-gray-700 font-medium mb-1">Nombre</label>
          <input class="border rounded px-2 py-1 w-full" [(ngModel)]="servicio.nombre" name="nombre" required />
        </div>
        <div class="mb-4">
          <label class="block text-gray-700 font-medium mb-1">Descripción</label>
          <textarea class="border rounded px-2 py-1 w-full" [(ngModel)]="servicio.descripcion" name="descripcion" rows="2"></textarea>
        </div>
        <div class="mb-4">
          <label class="block text-gray-700 font-medium mb-1">Categoría (opcional)</label>
          <select class="border rounded px-2 py-1 w-full" [(ngModel)]="servicio.categoriaId" name="categoriaId">
            <option [ngValue]="null">Sin categoría</option>
            <option *ngFor="let cat of categorias" [ngValue]="cat.id">{{cat.nombre}}</option>
          </select>
        </div>
        <div class="mb-4">
          <label class="block text-gray-700 font-medium mb-1">Duración (minutos)</label>
          <input type="number" class="border rounded px-2 py-1 w-full" [(ngModel)]="servicio.duracionMinutos" name="duracionMinutos" min="1" required />
        </div>
        <div class="mb-4 flex gap-2">
          <div class="flex-1">
            <label class="block text-gray-700 font-medium mb-1">Precio</label>
            <input type="number" class="border rounded px-2 py-1 w-full" [(ngModel)]="servicio.precio" name="precio" min="0" required />
          </div>
          <div>
            <label class="block text-gray-700 font-medium mb-1">Moneda</label>
            <input class="border rounded px-2 py-1 w-20" [(ngModel)]="servicio.moneda" name="moneda" maxlength="3" required />
          </div>
        </div>
        <div class="mb-4">
          <label class="block text-gray-700 font-medium mb-1">Tipo</label>
          <input class="border rounded px-2 py-1 w-full" [(ngModel)]="servicio.tiposDisponibles" name="tiposDisponibles" />
        </div>
        <div class="mb-4">
          <label class="block text-gray-700 font-medium mb-1">Número de asistentes</label>
          <input type="number" class="border rounded px-2 py-1 w-full" [(ngModel)]="servicio.numeroAsistentes" name="numeroAsistentes" min="1" />
        </div>
        <div class="mb-4">
          <label class="block text-gray-700 font-medium mb-1">Ubicación</label>
          <input class="border rounded px-2 py-1 w-full" [(ngModel)]="servicio.ubicacion" name="ubicacion" />
        </div>
        <div class="mb-4">
          <label class="block text-gray-700 font-medium mb-1">Color</label>
          <input type="color" class="border rounded px-2 py-1 w-16 h-10" [(ngModel)]="servicio.color" name="color" />
        </div>
        <div class="mb-4 flex items-center gap-2">
          <input type="checkbox" [(ngModel)]="servicio.ocultarPublico" name="ocultarPublico" id="ocultarPublicoEdit" />
          <label for="ocultarPublicoEdit" class="text-gray-700 font-medium">Ocultar del público</label>
        </div>
        <div class="flex justify-end gap-2">
          <button type="button" class="bg-gray-300 px-4 py-1 rounded" (click)="onClose()">Cancelar</button>
          <button type="submit" class="bg-blue-600 text-white px-4 py-1 rounded">Guardar</button>
        </div>
      </form>
      <div *ngSwitchCase="'delete'">
        <p class="mb-6">¿Seguro que deseas eliminar el servicio <b>{{servicio.nombre}}</b>?</p>
        <div class="flex justify-end gap-2">
          <button class="bg-gray-300 px-4 py-1 rounded" (click)="onClose()">Cancelar</button>
          <button class="bg-red-600 text-white px-4 py-1 rounded" (click)="onDelete()">Eliminar</button>
        </div>
      </div>
    </ng-container>
  </div>
</div>
